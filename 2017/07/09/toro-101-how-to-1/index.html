<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="the simple, the best">
  <meta name="keyword" content="eneim">
  
    <link rel="shortcut icon" type="image/ico" href="/source/css/logo"/> 
  
  <title>
    
      Toro 101 - Videos on RecyclerView, starts/pauses automatically when scroll | eneim&#39;s log
    
  </title>
  
    <meta name="google-site-verification" content="Df1Qt2ADt1yncYOOFgSQqKm6MBiEXc2W7D7hr26ErEU" />
  

  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/css/style.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <link href="//vjs.zencdn.net/6.2.0/video-js.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/atom-one-light.min.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css"> -->
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.28/webfontloader.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script src="/js/qrious.js"></script>
  <script src="/js/sequence-diagram-snap-min.js"></script>
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


</head>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>eneim's log</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link" target="blank">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link" target="blank">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link" target="blank">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link" target="blank">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link" target="blank">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>Toro 101 - Videos on RecyclerView, starts/pauses automatically when scroll</h2>
  <p class="post-date">July 9, 2017</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h2 id="1-Intro"><a href="#1-Intro" class="headerlink" title="1. Intro"></a>1. Intro</h2><p>With the effort I put on to rework the <a href="https://github.com/eneim/toro" target="_blank" rel="noopener">Toro</a> library, I believe that implementing <strong>auto playback playlist</strong> is easier than ever before. But with the lack of documentation skill, I’m afraid a single README or a few sample code cannot tell that to all the people who need it. So I write about it, what it does, how it can help you and how to use it with the least effort.</p>
<h2 id="2-Our-target"><a href="#2-Our-target" class="headerlink" title="2. Our target"></a>2. Our target</h2><p>This post will show you how to use <strong>Toro v3 (currently beta 1)</strong> to implement a dead simple Video list, that will start and pause the playback automatically. A demo looks like below:</p>
<img src="/2017/07/09/toro-101-how-to-1/demo_toro_1.gif">
<blockquote>
<p><strong>Question 1</strong>: Why do I even need to do this?</p>
</blockquote>
<p><strong>Answer 1</strong>: Only if you want to implement things like Twitter timeline, Facebook feed, or Instagram, where Video starts playback automatically when user scrolls to it, and pause it when user scrolls it off screen.</p>
<blockquote>
<p><strong>Question 2</strong>: This doesn’t look like Facebook. Is it too simple?</p>
</blockquote>
<p><strong>Answer 2</strong>: First thing first. Future post will be about more complicated things, like Facebook timeline and so on. Of course you can skip this and go to the <a href="https://github.com/eneim/toro" target="_blank" rel="noopener">repo</a>, check out the <a href="https://github.com/eneim/toro/tree/dev-v3/app/src/main/java/im/ene/toro/sample" target="_blank" rel="noopener">sample code</a>. It is all there.</p>
<h2 id="3-Before-we-start"><a href="#3-Before-we-start" class="headerlink" title="3. Before we start"></a>3. Before we start</h2><p>Make sure the following things are in your checklist, and checked:</p>
<ul>
<li><p>You are creating an App targeting Android 16 or above. Because <strong>Toro</strong> officially supports <strong>ExoPlayer (2)</strong> which in turn supports Android downto 16, and also many advance features in Media playback start from this API onward.</p>
</li>
<li><p>You have at least basic understanding about <code>RecyclerView</code> and how to use it. Because <strong>Toro</strong> is created on top of <code>RecyclerView</code> and its eco-system, a smallest knowledge about using it is required.</p>
</li>
<li><p>You own the Videos, or at least you acknowledge your right to use them.</p>
</li>
</ul>
<h2 id="4-The-tutorial-step-by-step-to-create-that-cool-Video-list"><a href="#4-The-tutorial-step-by-step-to-create-that-cool-Video-list" class="headerlink" title="4. The tutorial: step-by-step to create that cool Video list."></a>4. The tutorial: step-by-step to create that cool Video list.</h2><ul>
<li><p>First: Create your app using Android Studio if you have not done yet. Make sure you have a project to work on :trollface:. If you use some Video from the Internet for this sample, please make sure to include the <strong>permission to connect to the Internet</strong> into your <code>manifest.xml</code>.</p>
</li>
<li><p>Add <code>Toro</code> and <code>ExoPlayer</code> to your app module’s <code>build.gradle</code> dependencies. Note that I also add <code>CardView</code> dependency to improve our UI.</p>
</li>
</ul>
<figure class="highlight gradle"><figcaption><span>build.gradle</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">// ↑ other dependencies ...</span></span><br><span class="line">    <span class="comment">// ↓ toro's dependencies and CardView</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">"im.ene.toro3:toro:3.0.0-beta1"</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">"com.google.android.exoplayer:exoplayer:r2.4.3"</span></span><br><span class="line">    <span class="keyword">compile</span> <span class="string">"com.android.support:cardview-v7:26.0.0-beta2"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>We will now setup a Video list in our Activity using the <code>Container</code> as below:</li>
</ul>
<figure class="highlight xml"><figcaption><span>activity_main.xml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">im.ene.toro.widget.Container</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/player_container"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Container container;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        container = findViewById(R.id.player_container);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>We will complete this Activity later.</p>
<ul>
<li>Next we will design our Video player view. This time I use a single <code>SimpleExoPlayerView</code> for our Video player. Naming the layout file as <code>view_holder_exoplayer_basic.xml</code>, the xml will look like below:</li>
</ul>
<figure class="highlight xml"><figcaption><span>view_holder_exoplayer_basic.xml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.CardView</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/card"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:cardBackgroundColor</span>=<span class="string">"@color/cardview_light_background"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">com.google.android.exoplayer2.ui.SimpleExoPlayerView</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:id</span>=<span class="string">"@+id/player"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:minHeight</span>=<span class="string">"200dp"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">app:resize_mode</span>=<span class="string">"fixed_height"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">app:surface_type</span>=<span class="string">"texture_view"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">app:use_controller</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v7.widget.CardView</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>One thing should be noticed here: <code>SimpleExoPlayerView</code> uses a <code>TextureView</code> or <code>SurfaceView</code> to display the Video. By default, if its height or width is 0, your Surface/SurfaceTexture will not be created. Therefore your Video will not be played. To work around this, I set a <code>minHeight</code> for it to be <code>200dp</code> which is reasonable for a <code>16:9</code> Video in portrait mode.</p>
<p>Also, related to the initial height of the PlayerView, my advice is to pre-calculate that height and set it to your layout so that your layout will not be resize at runtime, which gives a better UX.</p>
<p>In this tutorial, I use <code>TextureView</code> for the <code>SimpleExoPlayerView</code>.</p>
<p>Now let use that layout to create a <code>ViewHolder</code> (which implements <code>ToroPlayer</code>).</p>
<p>At first, your <code>ViewHolder</code> will look like this:</p>
<figure class="highlight java"><figcaption><span>SimplePlayerViewHolder.java (incompleted)</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimplePlayerViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> <span class="keyword">implements</span> <span class="title">ToroPlayer</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    SimpleExoPlayerView playerView;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BasicPlayerViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(itemView);</span><br><span class="line">        playerView = (SimpleExoPlayerView) itemView.findViewById(R.id.player);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// some un-implemented methods below</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now since we are using <code>SimpleExoPlayerView</code>, <strong>Toro</strong> comes with official support for this component, via <code>SimpleExoPlayerViewHelper</code>. <code>SimpleExoPlayerViewHelper</code> requires a <code>Uri</code> to work, so we will have 2 more fields and now we can complete the implementation of <code>ViewHolder</code> as below:</p>
<figure class="highlight java"><figcaption><span>SimplePlayerViewHolder.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimplePlayerViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> <span class="keyword">implements</span> <span class="title">ToroPlayer</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    SimpleExoPlayerView playerView;</span><br><span class="line">    SimpleExoPlayerViewHelper helper;</span><br><span class="line">    Uri mediaUri;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BasicPlayerViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(itemView);</span><br><span class="line">        playerView = (SimpleExoPlayerView) itemView.findViewById(R.id.player);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> View <span class="title">getPlayerView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> playerView;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> PlaybackInfo <span class="title">getCurrentPlaybackInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> helper != <span class="keyword">null</span> ? helper.getLatestPlaybackInfo() : <span class="keyword">new</span> PlaybackInfo();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(Container container, PlaybackInfo playbackInfo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (helper == <span class="keyword">null</span>) &#123;</span><br><span class="line">            helper = <span class="keyword">new</span> SimpleExoPlayerViewHelper(container, <span class="keyword">this</span>, mediaUri);</span><br><span class="line">        &#125;</span><br><span class="line">        helper.initialize(playbackInfo);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (helper != <span class="keyword">null</span>) helper.play();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (helper != <span class="keyword">null</span>) helper.pause();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPlaying</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> helper != <span class="keyword">null</span> &amp;&amp; helper.isPlaying();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (helper != <span class="keyword">null</span>) &#123;</span><br><span class="line">            helper.release();</span><br><span class="line">            helper = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">wantsToPlay</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ToroUtil.visibleAreaOffset(<span class="keyword">this</span>, itemView.getParent()) &gt;= <span class="number">0.85</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPlayerOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getAdapterPosition();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bind</span><span class="params">(Uri media)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.mediaUri = media;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It is worth mentioning that a correct implementation of <code>ToroPlayer</code> must provide a good result of <code>wantsToPlay()</code>, by which <code>Container</code> will know when a Player should start playback or not. In most of my sample, I use <code>ToroUtil.visibleAreaOffset()</code> which will calculate the visibility offset of the Video (not the whole View). You can always have a custom implementation (for example: Internet connected, User hit like, …). Always returning <code>false</code> will cause to no Video will be played. On the other hand, always returning <code>true</code> doesn’t guarantee that all of the Video will be played. I will talk more about this in future posts.</p>
<ul>
<li>The setup is almost done. We now only need an <code>Adapter</code> that uses the <code>SimplePlayerViewHolder</code> above and finish our setup for the <code>Container</code>.</li>
</ul>
<figure class="highlight java"><figcaption><span>SimpleAdapter.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">SimplePlayerViewHolder</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    MediaList mediaList = <span class="keyword">new</span> MediaList();</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> SimplePlayerViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</span><br><span class="line">        View view = LayoutInflater.from(parent.getContext())</span><br><span class="line">            .inflate(R.layout.view_holder_exoplayer_basic, parent, <span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SimplePlayerViewHolder(view);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(SimplePlayerViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        holder.bind(Uri.parse(<span class="string">"my_awesome_video.mp4"</span>) <span class="comment">/* FIXME use real data */</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mediaList.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Container container;</span><br><span class="line">    SimpleAdapter adapter;</span><br><span class="line">    LinearLayoutManager layoutManager;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        container = findViewById(R.id.player_container);</span><br><span class="line">        </span><br><span class="line">        layoutManager = <span class="keyword">new</span> LinearLayoutManager(<span class="keyword">this</span>);</span><br><span class="line">        container.setLayoutManager(layoutManager);</span><br><span class="line">        </span><br><span class="line">        adapter = <span class="keyword">new</span> SimpleAdapter();</span><br><span class="line">        container.setAdapter(adapter);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Now try to launch your App and see what happens. If nothing goes wrong, your list now starts the playback automatically and it also correctly switch the Video on your scroll as well.</li>
</ul>
<p>All the code above can be found in <a href="https://github.com/eneim/toro/tree/dev-v3/app/src/main/java/im/ene/toro/sample/basic" target="_blank" rel="noopener">basic demo</a> (this package includes more classes for <code>ViewPager</code> demo too. For now you can safely ignore <code>BasicListFragment</code> class).</p>
<h2 id="5-Conclusion-and-future-work"><a href="#5-Conclusion-and-future-work" class="headerlink" title="5. Conclusion and future work"></a>5. Conclusion and future work</h2><p>So here we are. With just a few code, we solve one of the most difficult UX in Android app. And it doesn’t stop right there. In future post, I would like to introduce more complicated implementation using Toro, with ease. All of the code is already available on <a href="https://github.com/eneim/toro/tree/dev-v3/app/src/main/java" target="_blank" rel="noopener">github/eneim/toro</a>, I will have more or less in-depth discussions as well as my thought about why and how here. </p>
<p>All feedback are welcome. Happy scrolling!</p>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags/Android" class="tag-code">Android</a>

  <a href="/tags/RecyclerView" class="tag-code">RecyclerView</a>

  <a href="/tags/MediaPlayer" class="tag-code">MediaPlayer</a>

  <a href="/tags/ExoPlayer" class="tag-code">ExoPlayer</a>

  <a href="/tags/Toro" class="tag-code">Toro</a>

      </div>
    
    <!-- Share START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">Scan the QR code to share this article</p>
      </div>
    
    <!-- Share END -->
    <!-- Donate START -->
    
      <div class="money-like">
        <script type='text/javascript' src='https://ko-fi.com/widgets/widget_2.js'></script>
        <script type='text/javascript'>
          kofiwidget2.init('Feel good for a Koffee? ^^!', '#6e61ab', 'A342OWW');kofiwidget2.draw();
        </script> 
      </div>
    
    <!-- Donate END -->
    <div id="disqus_thread"></div>
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2017/06/25/toro-3-0-alpha-1-was-born-from-scratch-with-love/">
        <span class="nav-arrow">← </span>
        
          Toro 3.0 alpha 1 was born, from scratch with love
        
      </a>
    
    
      <a class="nav-right" href="/2018/08/27/introduction-to-toro-3-6-0-2802/">
        
          A brief introduction to Toro 3.6.0.2802
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    
      <!-- No Comment -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Table of contents</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-Intro"><span class="toc-nav-text">1. Intro</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-Our-target"><span class="toc-nav-text">2. Our target</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-Before-we-start"><span class="toc-nav-text">3. Before we start</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#4-The-tutorial-step-by-step-to-create-that-cool-Video-list"><span class="toc-nav-text">4. The tutorial: step-by-step to create that cool Video list.</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#5-Conclusion-and-future-work"><span class="toc-nav-text">5. Conclusion and future work</span></a></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>



<script>
  (function () {
    var url = 'https://eneim.github.io/2017/07/09/toro-101-how-to-1/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()
        
        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
  
  // qrcode
  var qr = new QRious({
    element: document.getElementById('share-qrcode'),
    value: document.location.href
  });

  // var disqus_config = function () {
  //     this.page.url = 'https://eneim.github.io/2017/07/09/toro-101-how-to-1/';
  //     this.page.identifier = '2017/07/09/toro-101-how-to-1/';
  //     this.page.title = 'Toro 101 - Videos on RecyclerView, starts/pauses automatically when scroll';
  // };

  // (function() {
  // var d = document, s = d.createElement('script');
  // s.src = '//eneim.disqus.com/embed.js';
  // s.setAttribute('data-timestamp', +new Date());
  // (d.head || d.body).appendChild(s);
  // })();
</script>

<script>
  var disqus_shortname = 'eneim';
  
  var disqus_url = 'https://eneim.github.io/2017/07/09/toro-101-how-to-1/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2018 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'false';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function() {
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72567780-7', 'auto');
  ga('send', 'pageview');
</script>

<script src="/js/script.js"></script>
  </body>
</html>