<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="the simple, the best">
  <meta name="keyword" content="eneim">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      A brief introduction to Toro 3.6.0.2802 | eneim&#39;s log
    
  </title>
  
    <meta name="google-site-verification" content="Df1Qt2ADt1yncYOOFgSQqKm6MBiEXc2W7D7hr26ErEU" />
  

  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/css/style.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <link href="//vjs.zencdn.net/6.2.0/video-js.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/atom-one-light.min.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css"> -->
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.28/webfontloader.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script src="/js/sequence-diagram-snap-min.js"></script>
</head>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>eneim's log</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link" target="blank">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link" target="blank">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link" target="blank">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link" target="blank">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link" target="blank">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>A brief introduction to Toro 3.6.0.2802</h2>
  <p class="post-date">August 27, 2018</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h1 id="A-brief-introduction-to-Toro-version-3-6-0-2802"><a href="#A-brief-introduction-to-Toro-version-3-6-0-2802" class="headerlink" title="A brief introduction to Toro version 3.6.0.2802"></a>A brief introduction to Toro version 3.6.0.2802</h1><blockquote>
<p>I’m a bad developer. Bad developer often comes with execuse. Mine is: I’m quite bad at writing documentation, and once I write it down, it is pretty long and hard to follow. </p>
</blockquote>
<blockquote>
<p>This time, I want to fix it.</p>
</blockquote>
<h2 id="0-Toro-since-then"><a href="#0-Toro-since-then" class="headerlink" title="0. Toro, since then"></a>0. Toro, since then</h2><p>So, in previous blog post (which is 1 year ago :surprised:), I had a quick introduction for Toro 3, which was still in beta. And in that post, I also promised some later posts regarding how to do what and why, etc. All of those promises are not fulfilled yet … And today, 1 year since the library out of beta, I would like to make it.</p>
<h2 id="1-Toro-3-6-0-2802-the-version-name"><a href="#1-Toro-3-6-0-2802-the-version-name" class="headerlink" title="1. Toro 3.6.0.2802, the version name"></a>1. Toro 3.6.0.2802, the version name</h2><p>Toro, by default, doesn’t vow to be dedicated to any 3rd party library. But it comes with an extension that support ExoPlayer out of the box. ExoPlayer, in its nature, <a href="https://github.com/google/ExoPlayer/issues/3680" target="_blank" rel="noopener">doesn’t guarantee to be ‘backward compatible’ in new release</a>.</p>
<p>Though, it is important for me to always support latest feature/patches/bug fixes, but still keep your App works well with a certain dependency version. So, from 3.6.0, I add the 4th part to its version name, which indicates the version of ExoPlayer it supports. So from now on, you may expect to have 3.6.0.2802, 3.6.0.2804, 3.6.1.2802 and so on. It may be complicated at first, but I will always try to publish new release to support latest ExoPlayer available release (at the time I publish it), and consider to support lower version of ExoPlayer if there is request from developers.</p>
<h2 id="2-‘Got-that-So-what-else-should-I-care-about-this-release-’"><a href="#2-‘Got-that-So-what-else-should-I-care-about-this-release-’" class="headerlink" title="2. ‘Got that. So what else should I care about this release?’"></a>2. ‘Got that. So what else should I care about this release?’</h2><p>This is the main part of the introduction, which I plan to be in more than one posts. In this post, I will go through some why and what about this update. And in upcoming posts, I will fulfill my promise to talk about why and how to create a specific UX using Toro and its extensions.</p>
<h2 id="3-What’s-new-in-Toro-3-6-0-2802"><a href="#3-What’s-new-in-Toro-3-6-0-2802" class="headerlink" title="3. What’s new in Toro 3.6.0.2802"></a>3. What’s new in Toro 3.6.0.2802</h2><p>Let’s go one by one following the CHANGELOG.md</p>
<h4 id="3-1-Toro-now-depends-on-ExoPlayer-2-8-2-and-its-version-name-format-is-updated-to-indicate-which-version-of-ExoPlayer-is-supported"><a href="#3-1-Toro-now-depends-on-ExoPlayer-2-8-2-and-its-version-name-format-is-updated-to-indicate-which-version-of-ExoPlayer-is-supported" class="headerlink" title="3.1 Toro now depends on ExoPlayer 2.8.2, and its version name format is updated to indicate which version of ExoPlayer is supported."></a>3.1 Toro now depends on ExoPlayer 2.8.2, and its version name format is updated to indicate which version of ExoPlayer is supported.</h4><p>Why: please go back to ‘1. Toro 3.6.0.2802, the version name’ for the answer.</p>
<h4 id="3-2-Container-savePlaybackInfo-now-accepts-Nullable-PlaybackInfo-but-it-will-be-ignored"><a href="#3-2-Container-savePlaybackInfo-now-accepts-Nullable-PlaybackInfo-but-it-will-be-ignored" class="headerlink" title="3.2 Container#savePlaybackInfo now accepts Nullable PlaybackInfo but it will be ignored."></a>3.2 Container#savePlaybackInfo now accepts Nullable PlaybackInfo but it will be ignored.</h4><p>Why: There are <a href="https://github.com/eneim/toro/issues/341" target="_blank" rel="noopener">reports about NPT in this method</a>. In fact, this method is accessible from public, so it is error prone itself. But hiding it will break the compatibility. In my debug, the NPE never happended, but somehow it happened. To make it easier to control, I allow <code>Nullable</code> parameters being passed to it, the method will just ignore the <code>Null</code> value and d<br>Why: There are <a href="https://github.com/eneim/toro/issues/341" target="_blank" rel="noopener">reports about NPT in this method</a>. In fact, this method is accessible from public, so it is error prone itself. But hiding it will break the compatibility. In my debug, the NPE never happended, but somehow it happened. To make it easier to control, I allow <code>Nullable</code> parameters being passed to it, the method will just ignore the <code>Null</code> value and do nothing instead.</p>
<h4 id="3-3-Config-in-toro-extension-for-exoplayer-no-longer-use-array-of-DrmSessionManager"><a href="#3-3-Config-in-toro-extension-for-exoplayer-no-longer-use-array-of-DrmSessionManager" class="headerlink" title="3.3 Config (in toro extension for exoplayer) no longer use array of DrmSessionManager"></a>3.3 Config (in toro extension for exoplayer) no longer use array of DrmSessionManager</h4><p>The history of this class <code>Config</code> is to help Toro to cache a pool of <code>ExoPlayer</code> instances those share the same configurations. One of the configuration is the <code>DrmSessionManager</code>. Also, I would like to be honest about that I’m not fully understand this class, and just merely adopt from ExoPlayer demo app. And it is even worse when I try to support multiple <code>DrmSessionManager</code> using as least resource as possible. This produces the array of <code>DrmSessionManager</code> in the Config.</p>
<p>From 3.6.0.2802, I remove this option and just use a single <code>DrmSessionManager</code>. I will investigate more time learning about this, and have more elegant support in the future.</p>
<h4 id="3-4-ToroExo-createDrmSessionManager-no-longer-requires-Handler-parameter"><a href="#3-4-ToroExo-createDrmSessionManager-no-longer-requires-Handler-parameter" class="headerlink" title="3.4 ToroExo#createDrmSessionManager no longer requires Handler parameter"></a>3.4 ToroExo#createDrmSessionManager no longer requires Handler parameter</h4><h4 id="3-5-Introduce-ToroPlayer-OnErrorListener-and-required-setter-getter-for-it"><a href="#3-5-Introduce-ToroPlayer-OnErrorListener-and-required-setter-getter-for-it" class="headerlink" title="3.5 Introduce ToroPlayer.OnErrorListener and required setter/getter for it"></a>3.5 Introduce ToroPlayer.OnErrorListener and required setter/getter for it</h4><p>Toro and its components lack of this interface for quite a long time. So here it is. Client can set it from <code>Playable</code>, <code>ToroPlayerHelper</code> and variants.</p>
<h4 id="3-6-Introduce-ToroControlView-a-custom-UI-to-support-volume-control"><a href="#3-6-Introduce-ToroControlView-a-custom-UI-to-support-volume-control" class="headerlink" title="3.6 Introduce ToroControlView: a custom UI to support volume control"></a>3.6 Introduce <code>ToroControlView</code>: a custom UI to support volume control</h4><p>One of the most common request to <code>Toro</code> is the ability to control a playback’s volume. I take this request quite seriously, and thought about many scenarios where it can be used. Toro has already supported this via <code>Playable#setVolumeInfo(VolumeInfo)</code> and its callback <code>ToroPlayer.OnVolumeChangeListener</code>. <code>ToroControlView</code>, on the other hand, is an extension of <code>PlayerControlView</code> plus the Volume button. This button allows user to [1] Mute/UnMute and [2] Drag to change the volume.  </p>
<p>With the release of <code>ToroControlView</code>, Toro gives a better way to interact with playback volume from the View. To use this, client just simply use normal <code>PlayerView</code>, and apply <code>@layout/toro_exo_player_view</code> as its <code>player_layout_id</code>. This is a custom layout that uses <code>ToroControlView</code> internally.</p>
<h4 id="3-7-Introduce-the-beta-PressablePlayerSelector"><a href="#3-7-Introduce-the-beta-PressablePlayerSelector" class="headerlink" title="3.7 Introduce the beta PressablePlayerSelector"></a>3.7 Introduce the beta PressablePlayerSelector</h4><p>This class is a <code>PlayerSelector</code> and an <code>View.OnLongClickListener</code> at the same time. Using this with <code>Container</code> allows client to implement the following scenario: Regardless of how the playback is going, when User press to a PlayerView (long click), that PlayerView will be set to higher priority in Player candidates. Once scrolled, it that player will be selected for playback.</p>
<h4 id="3-8-Introduce-the-beta-ExoPlayerDispatcher"><a href="#3-8-Introduce-the-beta-ExoPlayerDispatcher" class="headerlink" title="3.8 Introduce the beta ExoPlayerDispatcher"></a>3.8 Introduce the beta ExoPlayerDispatcher</h4><p>This class is a <code>ControlDispatcher</code> of ExoPlayer’s <code>PlayerControlView</code>. Use this with <code>PlayerView</code> will allow user to control the playback using the UI. ExoPlayerDispatcher internally use a <code>PressablePlayerSelector</code> to connect to the Container to correctly update the playback position.</p>
<h4 id="3-9-Introduce-beta-AdsExoPlayerViewHelper-and-AdsPlayable"><a href="#3-9-Introduce-beta-AdsExoPlayerViewHelper-and-AdsPlayable" class="headerlink" title="3.9 Introduce beta AdsExoPlayerViewHelper and AdsPlayable"></a>3.9 Introduce beta AdsExoPlayerViewHelper and AdsPlayable</h4><p>Developers who use Toro may be familiar with <code>ExoPlayerViewHelper</code> and <code>ExoPlayable</code>. They wraps necessary implementation of ExoPlayer and ToroPlayer to allow easy integration of Toro into the App. These newly introduced classes are their extensions, allow the App to also work with Ads. This update internally uses <a href="https://github.com/google/ExoPlayer/tree/release-v2/extensions/ima" target="_blank" rel="noopener">ExoPlayer extension for IMA</a>, therefore one should be aware of this.</p>
<h4 id="3-10-Last-but-not-least-the-demo-apps-has-new-member-demo-ads"><a href="#3-10-Last-but-not-least-the-demo-apps-has-new-member-demo-ads" class="headerlink" title="3.10 Last but not least, the demo apps has new member: demo-ads"></a>3.10 Last but not least, the demo apps has new member: demo-ads</h4><p>In this update, I also aware of that <code>mopub for Android SDK</code> also updates to use ExoPlayer 2.8.2 internally. It is not that I officially support <code>mopub</code>, but it is important to support mostly used Ads SDK. So in this update, I also add new demo app: <em>demo-ads</em>. This app shows simple use case that integrate Toro with well-known Ads SDK like <code>mopub</code> and <code>IMA</code>.</p>
<h1 id="4-In-next-articles"><a href="#4-In-next-articles" class="headerlink" title="4. In next articles"></a>4. In next articles</h1><p>In this post, I quickly summary latest update of Toro library, with the why and what. In next articles, I would like to go in detail about how to implement a specific scenario. Hope it will fix more and more problem with media playback once may have.</p>
<p>Happy coding!</p>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags/Android" class="tag-code">Android</a>

  <a href="/tags/RecyclerView" class="tag-code">RecyclerView</a>

  <a href="/tags/MediaPlayer" class="tag-code">MediaPlayer</a>

  <a href="/tags/ExoPlayer" class="tag-code">ExoPlayer</a>

  <a href="/tags/Toro" class="tag-code">Toro</a>

  <a href="/tags/Ads" class="tag-code">Ads</a>

      </div>
    
    <div id="disqus_thread"></div>
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Table of contents</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#A-brief-introduction-to-Toro-version-3-6-0-2802"><span class="toc-nav-text">A brief introduction to Toro version 3.6.0.2802</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#0-Toro-since-then"><span class="toc-nav-text">0. Toro, since then</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-Toro-3-6-0-2802-the-version-name"><span class="toc-nav-text">1. Toro 3.6.0.2802, the version name</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-‘Got-that-So-what-else-should-I-care-about-this-release-’"><span class="toc-nav-text">2. ‘Got that. So what else should I care about this release?’</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-What’s-new-in-Toro-3-6-0-2802"><span class="toc-nav-text">3. What’s new in Toro 3.6.0.2802</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#4-In-next-articles"><span class="toc-nav-text">4. In next articles</span></a></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>



<script>
  (function () {
    var url = 'https://eneim.github.io/2018/08/27/introduction-to-toro-3-6-0-2802/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()
        
        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
  
  var disqus_config = function () {
      this.page.url = 'https://eneim.github.io/2018/08/27/introduction-to-toro-3-6-0-2802/';
      this.page.identifier = '2018/08/27/introduction-to-toro-3-6-0-2802/';
      this.page.title = 'A brief introduction to Toro 3.6.0.2802';
  };

  (function() {
  var d = document, s = d.createElement('script');
  s.src = '//eneim.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();

</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2018 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'false';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function() {
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine == 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72567780-7', 'auto');
  ga('send', 'pageview');
</script>

<script src="/js/script.js"></script>
  </body>
</html>