<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>A brief introduction to Toro 3.6.0.2802 · eneim's log</title><meta name="description" content="A brief introduction to Toro 3.6.0.2802 - Nam Nguyen"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#FB4D42"><meta name="google-site-verification" content="Df1Qt2ADt1yncYOOFgSQqKm6MBiEXc2W7D7hr26ErEU"><link rel="short icon" href="/img/eneim.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="/css/zoom.css"><meta property="og:title" content="A brief introduction to Toro 3.6.0.2802"><meta property="og:image"><meta property="og:description" content=""></head><body><div class="wrap"><div class="header"><a href="/" class="logo-link"><img src="/img/avatar.jpg"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" rel="noreferrer" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="/archives/" target="_self" rel="noreferrer" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/eneim" target="_blank" rel="noreferrer" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" rel="noreferrer" class="nav-list-link">RSS</a></li></ul></div></div><section class="container"><div class="post"><article class="post-block"><div class="wrap"><h1 class="post-title">A brief introduction to Toro 3.6.0.2802</h1><h2 class="post-subtitle"></h2><header class="post-info">Aug 27, 2018<div class="fb-ir-time"><time datetime="2018-08-27T14:23:45.000Z" class="op-modified"></time><time datetime="2018-08-27T14:23:45.000Z" class="op-published"></time></div><div class="tags"><a href="/tags/Android" class="tag-link">#Android</a><a href="/tags/RecyclerView" class="tag-link">#RecyclerView</a><a href="/tags/MediaPlayer" class="tag-link">#MediaPlayer</a><a href="/tags/ExoPlayer" class="tag-link">#ExoPlayer</a><a href="/tags/Toro" class="tag-link">#Toro</a><a href="/tags/Ads" class="tag-link">#Ads</a></div></header></div><div class="wrap"><div class="post-content"><blockquote><p>I’m a bad developer. Bad developer often comes with execuse. Mine is: I’m quite bad at writing documentation, and once I write it down, it is pretty long and hard to follow.</p></blockquote><blockquote><p>This time, I want to fix it.</p></blockquote><h1 id="0-Toro-since-then"><a href="#0-Toro-since-then" class="headerlink" title="0. Toro, since then"></a>0. Toro, since then</h1><p>So, in previous blog post (which is 1 year ago :surprised:), I had a quick introduction for Toro 3, which was still in beta. And in that post, I also promised some later posts regarding how to do what and why, etc. All of those promises are not fulfilled yet … And today, 1 year since the library out of beta, I would like to make it.</p><h1 id="1-Toro-3-6-0-2802-the-version-name"><a href="#1-Toro-3-6-0-2802-the-version-name" class="headerlink" title="1. Toro 3.6.0.2802, the version name"></a>1. Toro 3.6.0.2802, the version name</h1><p>Toro, by default, doesn’t vow to be dedicated to any 3rd party library. But it comes with an extension that support ExoPlayer out of the box. ExoPlayer, in its nature, <a href="https://github.com/google/ExoPlayer/issues/3680" target="_blank" rel="noopener">doesn’t guarantee to be ‘backward compatible’ in new release</a>.</p><p>Though, it is important for me to always support latest feature/patches/bug fixes, but still keep your App works well with a certain dependency version. So, from 3.6.0, I add the 4th part to its version name, which indicates the version of ExoPlayer it supports. So from now on, you may expect to have 3.6.0.2802, 3.6.0.2804, 3.6.1.2802 and so on. It may be complicated at first, but I will always try to publish new release to support latest ExoPlayer available release (at the time I publish it), and consider to support lower version of ExoPlayer if there is request from developers.</p><h1 id="2-‘What-else-’"><a href="#2-‘What-else-’" class="headerlink" title="2. ‘What else?’"></a>2. ‘What else?’</h1><p>This is the main part of the introduction, which I plan to be in more than one posts. In this post, I will go through some why and what about this update. And in upcoming posts, I will fulfill my promise to talk about why and how to create a specific UX using Toro and its extensions.</p><h1 id="3-What’s-new-in-Toro-3-6-0-2802"><a href="#3-What’s-new-in-Toro-3-6-0-2802" class="headerlink" title="3. What’s new in Toro 3.6.0.2802"></a>3. What’s new in Toro 3.6.0.2802</h1><p>Let’s go one by one following the CHANGELOG.md</p><h2 id="3-1-Supported-ExoPlayer-version-now-included-in-version-name"><a href="#3-1-Supported-ExoPlayer-version-now-included-in-version-name" class="headerlink" title="3.1 Supported ExoPlayer version now included in version name"></a>3.1 Supported ExoPlayer version now included in version name</h2><p>Why: please go back to ‘1. Toro 3.6.0.2802, the version name’ for the answer.</p><h2 id="3-2-Container’-savePlaybackInfo-accepts-Nullable-PlaybackInfo"><a href="#3-2-Container’-savePlaybackInfo-accepts-Nullable-PlaybackInfo" class="headerlink" title="3.2 Container’ savePlaybackInfo() accepts Nullable PlaybackInfo"></a>3.2 Container’ savePlaybackInfo() accepts Nullable PlaybackInfo</h2><p>Why: There are <a href="https://github.com/eneim/toro/issues/341" target="_blank" rel="noopener">reports about NPE in this method</a>. In fact, this method is accessible from public, so it is error prone itself. But hiding it will break the compatibility. In my debug, the NPE never happended, but somehow it happened. To make it easier to control, I allow <code>Nullable</code> parameters being passed to it, the method will just ignore the <code>Null</code> value and do nothing instead.</p><h2 id="3-3-ToroExo-Config-no-longer-uses-array-of-DrmSessionManager"><a href="#3-3-ToroExo-Config-no-longer-uses-array-of-DrmSessionManager" class="headerlink" title="3.3 ToroExo Config no longer uses array of DrmSessionManager"></a>3.3 ToroExo Config no longer uses array of DrmSessionManager</h2><p>The history of this class <code>Config</code> is to help Toro to cache a pool of <code>ExoPlayer</code> instances those share the same configurations. One of the configuration is the <code>DrmSessionManager</code>. Also, I would like to be honest about that I’m not fully understand this class, and just merely adopt from ExoPlayer demo app. And it is even worse when I try to support multiple <code>DrmSessionManager</code> using as least resource as possible. This produces the array of <code>DrmSessionManager</code> in the Config.</p><p>From 3.6.0.2802, I remove this option and just use a single <code>DrmSessionManager</code>. I will investigate more time learning about this, and have more elegant support in the future.</p><h2 id="3-4-ToroExo’-createDrmSessionManager-no-longer-requires-Handler"><a href="#3-4-ToroExo’-createDrmSessionManager-no-longer-requires-Handler" class="headerlink" title="3.4 ToroExo’ createDrmSessionManager() no longer requires Handler"></a>3.4 ToroExo’ createDrmSessionManager() no longer requires Handler</h2><h2 id="3-5-New-ToroPlayer-OnErrorListener"><a href="#3-5-New-ToroPlayer-OnErrorListener" class="headerlink" title="3.5 New ToroPlayer.OnErrorListener"></a>3.5 New ToroPlayer.OnErrorListener</h2><p>Toro and its components lack of this interface for quite a long time. So here it is. Client can set it from <code>Playable</code>, <code>ToroPlayerHelper</code> and variants.</p><h2 id="3-6-ToroControlView-a-custom-UI-to-support-volume-control"><a href="#3-6-ToroControlView-a-custom-UI-to-support-volume-control" class="headerlink" title="3.6 ToroControlView: a custom UI to support volume control"></a>3.6 ToroControlView: a custom UI to support volume control</h2><p>One of the most common request to <code>Toro</code> is the ability to control a playback’s volume. I take this request quite seriously, and thought about many scenarios where it can be used. Toro has already supported this via <code>Playable#setVolumeInfo(VolumeInfo)</code> and its callback <code>ToroPlayer.OnVolumeChangeListener</code>. <code>ToroControlView</code>, on the other hand, is an extension of <code>PlayerControlView</code> plus the Volume button. This button allows user to [1] Mute/UnMute and [2] Drag to change the volume.</p><p>With the release of <code>ToroControlView</code>, Toro gives a better way to interact with playback volume from the View. To use this, client just simply use normal <code>PlayerView</code>, and apply <code>@layout/toro_exo_player_view</code> as its <code>player_layout_id</code>. This is a custom layout that uses <code>ToroControlView</code> internally.</p><h2 id="3-7-PressablePlayerSelector-beta"><a href="#3-7-PressablePlayerSelector-beta" class="headerlink" title="3.7 PressablePlayerSelector beta"></a>3.7 PressablePlayerSelector beta</h2><p>This class is a <code>PlayerSelector</code> and an <code>View.OnLongClickListener</code> at the same time. Using this with <code>Container</code> allows client to implement the following scenario: Regardless of how the playback is going, when User press to a PlayerView (long click), that PlayerView will be set to higher priority in Player candidates. Once scrolled, it that player will be selected for playback.</p><h2 id="3-8-ExoPlayerDispatcher-beta"><a href="#3-8-ExoPlayerDispatcher-beta" class="headerlink" title="3.8 ExoPlayerDispatcher beta"></a>3.8 ExoPlayerDispatcher beta</h2><p>This class is a <code>ControlDispatcher</code> of ExoPlayer’s <code>PlayerControlView</code>. Use this with <code>PlayerView</code> will allow user to control the playback using the UI. ExoPlayerDispatcher internally use a <code>PressablePlayerSelector</code> to connect to the Container to correctly update the playback position.</p><h2 id="3-9-AdsExoPlayerViewHelper-and-AdsPlayable-beta"><a href="#3-9-AdsExoPlayerViewHelper-and-AdsPlayable-beta" class="headerlink" title="3.9 AdsExoPlayerViewHelper and AdsPlayable (beta)"></a>3.9 AdsExoPlayerViewHelper and AdsPlayable (beta)</h2><p>Developers who use Toro may be familiar with <code>ExoPlayerViewHelper</code> and <code>ExoPlayable</code>. They wraps necessary implementation of ExoPlayer and ToroPlayer to allow easy integration of Toro into the App. These newly introduced classes are their extensions, allow the App to also work with Ads. This update internally uses <a href="https://github.com/google/ExoPlayer/tree/release-v2/extensions/ima" target="_blank" rel="noopener">ExoPlayer extension for IMA</a>, therefore one should be aware of this.</p><h2 id="3-10-New-demo-demo-ads"><a href="#3-10-New-demo-demo-ads" class="headerlink" title="3.10 New demo: demo-ads"></a>3.10 New demo: demo-ads</h2><p>In this update, I also aware of that <code>mopub for Android SDK</code> also updates to use ExoPlayer 2.8.2 internally. It is not that I officially support <code>mopub</code>, but it is important to support mostly used Ads SDK. So in this update, I also add new demo app: <em>demo-ads</em>. This app shows simple use case that integrate Toro with well-known Ads SDK like <code>mopub</code> and <code>IMA</code>.</p><h1 id="4-In-next-articles"><a href="#4-In-next-articles" class="headerlink" title="4. In next articles"></a>4. In next articles</h1><p>In this post, I quickly summary latest update of Toro library, with the why and what. In next articles, I would like to go in detail about how to implement a specific scenario. Hope it will fix more and more problem with media playback once may have.</p><p>Happy coding!</p><div class="qrcode"><img id="post-qrcode" src="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8960' height='8960' viewBox='0 0 35 35'%3e%3cpath d='M1 1h7v7h-7zM9 1h4v1h-1v1h-2v1h-1zM14 1h1v1h1v1h1v1h-1v1h-1v-1h-1zM18 1h1v1h-1zM21 1h2v3h1v1h-1v1h-3v-1h2v-2h-2v2h-1v1h-1v3h2v1h1v-1h-1v-1h1v-1h1v3h1v1h1v-1h-1v-1h2v1h1v-1h1v1h2v-1h1v2h-3v2h-1v2h-2v1h-2v-1h1v-2h1v1h1v-2h1v-1h-1v1h-3v-1h-2v1h2v1h-2v2h-1v1h-1v-2h1v-1h-1v-1h1v-2h-2v-1h-1v-1h1v-1h-1v1h-1v-2h1v-1h1v-1h2v-2h2zM25 1h1v3h-2v-1h1zM27 1h7v7h-7zM2 2v5h5v-5zM28 2v5h5v-5zM3 3h3v3h-3zM12 3h1v1h-1zM29 3h3v3h-3zM10 4h2v1h-2zM9 5h1v1h-1zM25 5h1v1h-1zM12 6h1v1h-1zM23 6h2v1h-1v1h-1zM9 7h1v1h-1zM11 7h1v1h-1zM13 7h1v1h-1zM19 7h1v1h-1zM25 7h1v1h-1zM10 8h1v1h-1zM14 8h1v1h-1zM1 9h1v1h-1zM4 9h6v2h1v-1h2v1h-1v1h-2v1h-2v-1h1v-2h-3v1h-1v-1h-1zM15 9h1v1h1v1h1v1h-1v1h-1v-2h-1v3h1v1h1v1h-2v-1h-2v-4h1v-1h1zM31 9h3v1h-3zM3 10h1v1h1v2h-1v-1h-1zM6 11h2v1h-2zM30 11h1v1h-1zM32 11h2v1h-1v3h1v6h-2v1h-1v-1h-1v-1h1v-2h1v2h1v-3h-2v1h-1v-5h1v3h1v-3h-1v-1h1zM1 12h2v1h1v1h1v1h-1v2h1v1h1v-1h2v1h-1v1h-3v-1h-3v-2h1v1h1v-2h-2zM28 12h1v2h-2v-1h1zM7 13h1v1h-1zM6 14h1v1h-1zM9 14h1v2h1v-1h1v2h1v2h-1v-1h-1v-1h-3v-1h1zM21 14h1v1h-1zM7 15h1v1h-1zM20 15h1v1h1v2h-1v-1h-1zM13 16h1v1h-1zM17 16h1v1h-1zM24 16h1v1h-1zM27 16h2v2h-2zM15 17h2v2h1v1h-1v1h1v1h-2v-3h-1zM25 17h1v3h-2v-1h1zM8 18h2v1h1v1h-1v1h1v-1h3v2h-2v1h1v1h1v1h2v1h4v1h-1v1h1v1h-1v1h-1v1h-1v-1h-4v-1h5v-1h-2v-1h-1v1h-1v-1h-1v2h-1v-1h-1v-2h1v-1h-1v1h-1v-2h1v-2h-1v1h-1v-4h-1zM19 18h2v1h1v3h1v-1h1v1h1v1h2v2h1v-4h1v1h2v2h3v2h-1v-1h-2v1h1v1h-2v4h-2v-1h-3v-2h-1v-2h-1v-2h1v1h1v-1h-1v-1h-1v1h-1v-1h-2v1h-1v1h-1v-3h1v-1h1v1h1v-1h-1v-2h-1zM2 19h1v2h1v1h-2v3h1v-1h1v1h1v1h-4v-5h1zM7 19h1v1h-1zM14 19h1v1h-1zM27 19h2v1h-1v1h-2v-1h1zM4 20h1v1h-1zM6 20h1v1h1v1h-1v1h-1v-1h-1v-1h1zM25 21h1v1h-1zM4 22h1v1h1v1h1v1h1v1h-2v-1h-1v-1h-1zM14 22h1v2h-1zM32 22h1v1h-1zM7 23h2v1h-2zM29 23v1h1v-1zM16 24h1v1h-1zM21 24h1v1h-1zM9 26h1v5h-1zM21 26h2v2h-1v-1h-1zM26 26v3h3v-3zM1 27h7v7h-7zM20 27h1v1h-1zM27 27h1v1h-1zM2 28v5h5v-5zM21 28h1v2h-1zM31 28h2v1h-2zM3 29h3v3h-3zM33 29h1v1h-1zM11 30h1v1h5v1h-1v1h-1v1h-1v-1h-1v1h-1v-2h-2v-1h1zM19 30h2v1h1v3h-2v-1h-1v-1h1v-1h-1zM22 30h1v1h-1zM24 30h1v1h3v1h-3v1h1v1h-3v-2h1zM31 31h3v1h-1v2h-1v-1h-1v1h-1v-2h1zM28 32h1v1h-1zM9 33h1v1h-1zM16 33h1v1h-1zM18 33h1v1h-1zM27 33h1v1h-1z'/%3e%3c/svg%3e" style="width:128px;height:128px"><p class="notice">Scan the QR code to share this article</p></div></div></div></article></div><div class="money-like"><script type="text/javascript" src="https://ko-fi.com/widgets/widget_2.js"></script><script type="text/javascript">kofiwidget2.init("Send eneim a cup of Koffee? ^^!","#6e61ab","A342OWW"),kofiwidget2.draw()</script></div></section><div class="wrap"><footer><div class="paginator"><a href="/2019/01/07/2019-and-stuffs/" class="prev">NEWER</a><a href="/2017/07/09/toro-101-how-to-1/" class="next">OLDER</a></div><div id="disqus_thread"></div><script>var disqus_shortname="eneim",disqus_identifier="2018/08/27/introduction-to-toro-3-6-0-2802/",disqus_title="A brief introduction to Toro 3.6.0.2802",disqus_url="https://ene.im/2018/08/27/introduction-to-toro-3-6-0-2802/",disqus_config=function(){this.page.url=disqus_url,this.page.identifier=disqus_identifier};!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()</script><script id="dsq-count-scr" src="//undefined.disqus.com/count.js" async></script><div class="copyright"><p>© 2016 - 2019 <a href="https://ene.im">Nam Nguyen</a>, unless otherwise noted.</p></div></footer></div><script>!function(e,a,t,n,g,c){e.GoogleAnalyticsObject=n,e.ga||(e.ga=function(){(e.ga.q=e.ga.q||[]).push(arguments)}),e.ga.l=+new Date,g=a.createElement(t),c=a.getElementsByTagName(t)[0],g.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(g,c)}(window,document,"script","ga"),ga("create","UA-72567780-7","auto"),ga("send","pageview")</script><script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js" integrity="sha256-vrn14y7WH7zgEElyQqm2uCGSQrX/xjYDjniRUQx3NyU=" crossorigin="anonymous"></script><script src="/js/transition.js"></script><script src="/js/zoom.js"></script></body></html>