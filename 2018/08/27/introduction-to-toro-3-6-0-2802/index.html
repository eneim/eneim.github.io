<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="description" content="eneim | the simple, the best"><meta name="keyword" content="eneim"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="Df1Qt2ADt1yncYOOFgSQqKm6MBiEXc2W7D7hr26ErEU"><meta name="description" content="I’m a bad developer. Bad developer often comes with execuse. Mine is: I’m quite bad at writing documentation, and once I write it down, it is pretty long and hard to follow.    This time, I want to f">
<meta name="keywords" content="Android,RecyclerView,MediaPlayer,ExoPlayer,Toro,Ads">
<meta property="og:type" content="article">
<meta property="og:title" content="A brief introduction to Toro 3.6.0.2802">
<meta property="og:url" content="https://ene.im/2018/08/27/introduction-to-toro-3-6-0-2802/index.html">
<meta property="og:site_name" content="eneim's log">
<meta property="og:description" content="I’m a bad developer. Bad developer often comes with execuse. Mine is: I’m quite bad at writing documentation, and once I write it down, it is pretty long and hard to follow.    This time, I want to f">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-02-28T11:47:52.359Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A brief introduction to Toro 3.6.0.2802">
<meta name="twitter:description" content="I’m a bad developer. Bad developer often comes with execuse. Mine is: I’m quite bad at writing documentation, and once I write it down, it is pretty long and hard to follow.    This time, I want to f">
<meta name="twitter:creator" content="@ene__im"><title>A brief introduction to Toro 3.6.0.2802</title><link rel="shortcut icon" href="/img/eneim.ico" type="image/x-icon"><link href="/styles/site.css" rel="stylesheet"><link href="/styles/zoom.css" rel="stylesheet"><link href="/styles/youtube.css" rel="stylesheet"></head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="avatar"><img src="/images/avatar.jpg"></div><div class="author"><div class="author-name"><a href="/">eneim</a></div><div class="about-me">the simple, the best</div></div></div><div class="header-right"><ul class="navigation"><li><a href="/archives">archives</a></li><li><a href="/atom.xml">rss</a></li></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar.jpg"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/eneim"></span><a href="https://github.com/eneim" target="_blank" rel="noreferrer" title="https://github.com/eneim">https://github.com/eneim</a></li><li class="social-item"><span class="label"><img src="/images/socials/email.svg" alt="nam@ene.im"></span><span>nam@ene.im</span></li></ul></div></div></div></header><div class="container post"><section class="article"><div class="title">A brief introduction to Toro 3.6.0.2802</div><div class="date"># 2018/08/27</div><div class="content"><meta name="generator" content="Hexo 3.8.0"><blockquote>
<p>I’m a bad developer. Bad developer often comes with execuse. Mine is: I’m quite bad at writing documentation, and once I write it down, it is pretty long and hard to follow. </p>
</blockquote>
<blockquote>
<p>This time, I want to fix it.</p>
</blockquote>
<a id="more"></a>
<h1 id="0-Toro-since-then"><a href="#0-Toro-since-then" class="headerlink" title="0. Toro, since then"></a>0. Toro, since then</h1><p>So, in previous blog post (which is 1 year ago :surprised:), I had a quick introduction for Toro 3, which was still in beta. And in that post, I also promised some later posts regarding how to do what and why, etc. All of those promises are not fulfilled yet … And today, 1 year since the library out of beta, I would like to make it.</p>
<h1 id="1-Toro-3-6-0-2802-the-version-name"><a href="#1-Toro-3-6-0-2802-the-version-name" class="headerlink" title="1. Toro 3.6.0.2802, the version name"></a>1. Toro 3.6.0.2802, the version name</h1><p>Toro, by default, doesn’t vow to be dedicated to any 3rd party library. But it comes with an extension that support ExoPlayer out of the box. ExoPlayer, in its nature, <a href="https://github.com/google/ExoPlayer/issues/3680" target="_blank" rel="noopener">doesn’t guarantee to be ‘backward compatible’ in new release</a>.</p>
<p>Though, it is important for me to always support latest feature/patches/bug fixes, but still keep your App works well with a certain dependency version. So, from 3.6.0, I add the 4th part to its version name, which indicates the version of ExoPlayer it supports. So from now on, you may expect to have 3.6.0.2802, 3.6.0.2804, 3.6.1.2802 and so on. It may be complicated at first, but I will always try to publish new release to support latest ExoPlayer available release (at the time I publish it), and consider to support lower version of ExoPlayer if there is request from developers.</p>
<h1 id="2-‘What-else-’"><a href="#2-‘What-else-’" class="headerlink" title="2. ‘What else?’"></a>2. ‘What else?’</h1><p>This is the main part of the introduction, which I plan to be in more than one posts. In this post, I will go through some why and what about this update. And in upcoming posts, I will fulfill my promise to talk about why and how to create a specific UX using Toro and its extensions.</p>
<h1 id="3-What’s-new-in-Toro-3-6-0-2802"><a href="#3-What’s-new-in-Toro-3-6-0-2802" class="headerlink" title="3. What’s new in Toro 3.6.0.2802"></a>3. What’s new in Toro 3.6.0.2802</h1><p>Let’s go one by one following the CHANGELOG.md</p>
<h2 id="3-1-Supported-ExoPlayer-version-now-included-in-version-name"><a href="#3-1-Supported-ExoPlayer-version-now-included-in-version-name" class="headerlink" title="3.1 Supported ExoPlayer version now included in version name"></a>3.1 Supported ExoPlayer version now included in version name</h2><p>Why: please go back to ‘1. Toro 3.6.0.2802, the version name’ for the answer.</p>
<h2 id="3-2-Container’-savePlaybackInfo-accepts-Nullable-PlaybackInfo"><a href="#3-2-Container’-savePlaybackInfo-accepts-Nullable-PlaybackInfo" class="headerlink" title="3.2 Container’ savePlaybackInfo() accepts Nullable PlaybackInfo"></a>3.2 Container’ savePlaybackInfo() accepts Nullable PlaybackInfo</h2><p>Why: There are <a href="https://github.com/eneim/toro/issues/341" target="_blank" rel="noopener">reports about NPE in this method</a>. In fact, this method is accessible from public, so it is error prone itself. But hiding it will break the compatibility. In my debug, the NPE never happended, but somehow it happened. To make it easier to control, I allow <code>Nullable</code> parameters being passed to it, the method will just ignore the <code>Null</code> value and do nothing instead.</p>
<h2 id="3-3-ToroExo-Config-no-longer-uses-array-of-DrmSessionManager"><a href="#3-3-ToroExo-Config-no-longer-uses-array-of-DrmSessionManager" class="headerlink" title="3.3 ToroExo Config no longer uses array of DrmSessionManager"></a>3.3 ToroExo Config no longer uses array of DrmSessionManager</h2><p>The history of this class <code>Config</code> is to help Toro to cache a pool of <code>ExoPlayer</code> instances those share the same configurations. One of the configuration is the <code>DrmSessionManager</code>. Also, I would like to be honest about that I’m not fully understand this class, and just merely adopt from ExoPlayer demo app. And it is even worse when I try to support multiple <code>DrmSessionManager</code> using as least resource as possible. This produces the array of <code>DrmSessionManager</code> in the Config.</p>
<p>From 3.6.0.2802, I remove this option and just use a single <code>DrmSessionManager</code>. I will investigate more time learning about this, and have more elegant support in the future.</p>
<h2 id="3-4-ToroExo’-createDrmSessionManager-no-longer-requires-Handler"><a href="#3-4-ToroExo’-createDrmSessionManager-no-longer-requires-Handler" class="headerlink" title="3.4 ToroExo’ createDrmSessionManager() no longer requires Handler"></a>3.4 ToroExo’ createDrmSessionManager() no longer requires Handler</h2><h2 id="3-5-New-ToroPlayer-OnErrorListener"><a href="#3-5-New-ToroPlayer-OnErrorListener" class="headerlink" title="3.5 New ToroPlayer.OnErrorListener"></a>3.5 New ToroPlayer.OnErrorListener</h2><p>Toro and its components lack of this interface for quite a long time. So here it is. Client can set it from <code>Playable</code>, <code>ToroPlayerHelper</code> and variants.</p>
<h2 id="3-6-ToroControlView-a-custom-UI-to-support-volume-control"><a href="#3-6-ToroControlView-a-custom-UI-to-support-volume-control" class="headerlink" title="3.6 ToroControlView: a custom UI to support volume control"></a>3.6 ToroControlView: a custom UI to support volume control</h2><p>One of the most common request to <code>Toro</code> is the ability to control a playback’s volume. I take this request quite seriously, and thought about many scenarios where it can be used. Toro has already supported this via <code>Playable#setVolumeInfo(VolumeInfo)</code> and its callback <code>ToroPlayer.OnVolumeChangeListener</code>. <code>ToroControlView</code>, on the other hand, is an extension of <code>PlayerControlView</code> plus the Volume button. This button allows user to [1] Mute/UnMute and [2] Drag to change the volume.  </p>
<p>With the release of <code>ToroControlView</code>, Toro gives a better way to interact with playback volume from the View. To use this, client just simply use normal <code>PlayerView</code>, and apply <code>@layout/toro_exo_player_view</code> as its <code>player_layout_id</code>. This is a custom layout that uses <code>ToroControlView</code> internally.</p>
<h2 id="3-7-PressablePlayerSelector-beta"><a href="#3-7-PressablePlayerSelector-beta" class="headerlink" title="3.7 PressablePlayerSelector beta"></a>3.7 PressablePlayerSelector beta</h2><p>This class is a <code>PlayerSelector</code> and an <code>View.OnLongClickListener</code> at the same time. Using this with <code>Container</code> allows client to implement the following scenario: Regardless of how the playback is going, when User press to a PlayerView (long click), that PlayerView will be set to higher priority in Player candidates. Once scrolled, it that player will be selected for playback.</p>
<h2 id="3-8-ExoPlayerDispatcher-beta"><a href="#3-8-ExoPlayerDispatcher-beta" class="headerlink" title="3.8 ExoPlayerDispatcher beta"></a>3.8 ExoPlayerDispatcher beta</h2><p>This class is a <code>ControlDispatcher</code> of ExoPlayer’s <code>PlayerControlView</code>. Use this with <code>PlayerView</code> will allow user to control the playback using the UI. ExoPlayerDispatcher internally use a <code>PressablePlayerSelector</code> to connect to the Container to correctly update the playback position.</p>
<h2 id="3-9-AdsExoPlayerViewHelper-and-AdsPlayable-beta"><a href="#3-9-AdsExoPlayerViewHelper-and-AdsPlayable-beta" class="headerlink" title="3.9 AdsExoPlayerViewHelper and AdsPlayable (beta)"></a>3.9 AdsExoPlayerViewHelper and AdsPlayable (beta)</h2><p>Developers who use Toro may be familiar with <code>ExoPlayerViewHelper</code> and <code>ExoPlayable</code>. They wraps necessary implementation of ExoPlayer and ToroPlayer to allow easy integration of Toro into the App. These newly introduced classes are their extensions, allow the App to also work with Ads. This update internally uses <a href="https://github.com/google/ExoPlayer/tree/release-v2/extensions/ima" target="_blank" rel="noopener">ExoPlayer extension for IMA</a>, therefore one should be aware of this.</p>
<h2 id="3-10-New-demo-demo-ads"><a href="#3-10-New-demo-demo-ads" class="headerlink" title="3.10 New demo: demo-ads"></a>3.10 New demo: demo-ads</h2><p>In this update, I also aware of that <code>mopub for Android SDK</code> also updates to use ExoPlayer 2.8.2 internally. It is not that I officially support <code>mopub</code>, but it is important to support mostly used Ads SDK. So in this update, I also add new demo app: <em>demo-ads</em>. This app shows simple use case that integrate Toro with well-known Ads SDK like <code>mopub</code> and <code>IMA</code>.</p>
<h1 id="4-In-next-articles"><a href="#4-In-next-articles" class="headerlink" title="4. In next articles"></a>4. In next articles</h1><p>In this post, I quickly summary latest update of Toro library, with the why and what. In next articles, I would like to go in detail about how to implement a specific scenario. Hope it will fix more and more problem with media playback once may have.</p>
<p>Happy coding!</p>
</div><div class="tags"><a class="tag-link" href="/tags/ads/">Ads</a><a class="tag-link" href="/tags/android/">Android</a><a class="tag-link" href="/tags/exoplayer/">ExoPlayer</a><a class="tag-link" href="/tags/mediaplayer/">MediaPlayer</a><a class="tag-link" href="/tags/recyclerview/">RecyclerView</a><a class="tag-link" href="/tags/toro/">Toro</a></div></section></div><div class="container"><ul class="nav"><li>previous: <a href="/2019/01/07/2019-and-stuffs/">2019 and stuffs</a></li><li>next: <a href="/2017/07/09/toro-101-how-to-1/">Toro 101 - Videos on RecyclerView, starts/pauses automatically when scroll</a></li></ul><div class="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus</a></noscript></div></div></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><span>Powered by </span><a href="http://hexo.io" target="_blank" rel="noreferrer">Hexo</a><span>, Theme </span><a href="https://github.com/gary-Shen/hexo-theme-curry" target="_blank" rel="noreferrer">Curry</a><span>.</span></div></footer><script src="/script/jquery.min.js"></script><script src="/script/transition.js"></script><script src="/script/zoom.js"></script><script src="/script/index.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-72567780-7', 'auto');
ga('send', 'pageview');</script><script src="/script/post.js"></script><script>var disqus_shortname = 'eneim';
var disqus_identifier = '2018/08/27/introduction-to-toro-3-6-0-2802/';
var disqus_title = 'A brief introduction to Toro 3.6.0.2802';
var disqus_url = 'https://ene.im/2018/08/27/introduction-to-toro-3-6-0-2802/';
var disqus_config = function () {
    this.page.url = disqus_url;
    this.page.identifier = disqus_identifier;
};
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//undefined.disqus.com/count.js" async></script><script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html>